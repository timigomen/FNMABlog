$(function(){!function(){var c,ctx,width,height,axes=[],wanderers=[],colors=["#FFCC00","#66CCF0","#FF0033","#99CC33"];function onResize(t){reset()}function getWidth(t){Math.max(t.scrollWidth,t.offsetWidth,t.clientWidth)}function getHeight(t){Math.max(t.scrollHeight,t.offsetHeight,t.clientHeight)}function reset(){axes=[],width=c.width=window.innerWidth,height=c.height=window.innerHeight;for(var t=500,e=0;e<30;e++){var i=new point(width/30*e+t*Math.random(),0),n=new point(width/30*e+t*Math.random(),height);axes.push(new Axe(i,n))}for(e=0;e<20;e++){i=new point(0,height/20*e+t*Math.random()),n=new point(width,height/20*e+t*Math.random());axes.push(new Axe(i,n))}wanderers=[];for(e=0;e<3*colors.length;e++)wanderers.push(new wanderer(Math.random()*width,Math.random()*height,0,Math.random()+.5,colors[e%colors.length]))}function onMouseDown(){reset()}function update(){requestAnimationFrame(update),ctx.fillStyle="rgba(255,255,255,.25)",ctx.globalCompositeOperation="lighten",ctx.fillRect(0,0,width,height),ctx.globalCompositeOperation="source-over",ctx.strokeStyle="rgba(16,16,16,.01 )";for(var t=0;t<axes.length;t++)axes[t].draw(ctx);for(var e=0;e<wanderers.length;e++){var i=wanderers[e];i.update(width,height),ctx.beginPath(),ctx.fillStyle=i.color,ctx.arc(i.x,i.y,8,0,2*Math.PI,!0),ctx.fill(),ctx.closePath();for(t=0;t<axes.length;t++){var n=axes[t].reflect(i);ctx.beginPath(),ctx.fillStyle=i.color,ctx.arc(n.x,n.y,2,0,2*Math.PI,!0),ctx.fill(),ctx.closePath()}}}window.onload=function(){(c=document.getElementById("canvas")).width=window.innerWidth,c.width=window.innerHeight,ctx=c.getContext("2d"),window.onresize=onResize,window.onmousedown=onMouseDown,onResize(),update()};var Axe=function(t,e){this.a=t,this.b=e},wanderer=(Axe.prototype={draw:function(t){t.beginPath(),t.moveTo(this.a.x,this.a.y),t.lineTo(this.b.x,this.b.y),t.stroke(),t.closePath()},reflect:function(t){return utils.reflect(t,this.a,this.b)}},function(t,e,i,n,o){this.x=t||0,this.y=e||0,this.a=i||0,this.s=n||1,this.color=o||"#000"}),point=(wanderer.prototype={update:function(width,height){with(this)a+=10*(Math.random()-.5)/180*Math.PI,x+=Math.cos(a)*s,y+=Math.sin(a)*s,(x<0||y<0||x>width||y>height)&&(a+=Math.PI/180)}},function(t,e){this.x=t||0,this.y=e||0}),utils=function(){};utils.reflect=function(t,e,i){e=utils.project(t,e,i,!1);return new point(t.x+2*(e.x-t.x),t.y+2*(e.y-t.y))},utils.project=function(t,e,i,n){var o=i.x-e.x,h=i.y-e.y;return n&&0==o&&0==h||(t=((t.x-e.x)*o+(t.y-e.y)*h)/(o*o+h*h),n&&t<0)?e:n&&1<t?i:new point(e.x+t*o,e.y+t*h)}}()});